# 매개 변수 전달 방법

## 매개변수 전달의 의미적 모델

형식 매개변수의 의미적 모델

- 입력 모드
  - 형식 매개변수는 실 매개변수로 부터 데이터를 전달 받는다.
- 출력 모드
  - 형식 매개변수는 데이터를 실 매개변수로 전달한다.
- 입출력 모드
  - 형식 매개변수는 실 매개변수로부터 데이터를 전달받고, 또한 데이터를 실 매개변수에 전달한다.



데이터 이동 방법

- 값 전달 : 실제 값이 복사되어 전달된다.
- 접근경로 전달 : 값에 대한 접근 경로가 전달된다. (단순 포인터, 참조 등)



매개변수 전달의 구현 모델

- 입력모드 -> 값전달
- 출력모드 -> 결과전달
- 입출력모드 -> 값 결과 전달, 참조 전달
- 다중모드 -> 이름전달



### 값 전달

- 입력 모드의 구현
- 실 매개변수의 값은 해당 형식 매개변수를 초기화하는데 사용된다.
- 이후 형식 매개변수는 지역 변수로 사용된다.
- 구현
  - 물리적 값 이동(값 복사)
  - 접근 패스 전달
- 장점
  - 스칼라 변수에 대해서 전달 비용과 접근 시간 관점에서 효율적
  - 부프로그램 실행 동안에, 호출 프로그램은 안전하다.
- 단점
  - 물리적 이동 (배열의 경우)
    - 기억공간 중복 할당 부담
    - 값 복사에 따른 비용
  - 접근 패스 전달
    - 호출된 부프로그램에서 쓰기 - 보호 셸이 필요
    - 간접 주소지정에 따른 부담

### 결과 전달

- 출력 모드의 구현
- 호출 프로그램으로부터 부프로그램에 어떠한 값도 전달하지 않는다.
- 형식 매개변수는 지역변수로 사용되고, 제어가 호출자에세 반환되기 전에, 형식 매개변수의 값은 대응 실 매개변수로 전달
- 구현
  - 값 전달의 반대로 구현
  - 보통 값 복사를 통해서 구현
- 문제점
  1. 실 매개변수의 충돌시, 형식 매개변수가 실 매개변수에 복사되는 순서에 따라서 다른 결과가 가능함
  2. 실 매개변수의 주소 평가 시점에 따라서 다른 결과가 가능함.



### 값 결과 전달

- 입출력 모드의 구현
- 값 전달과 결과 전달의 혼합
- 복사 전달이라고 불림
- 매개변수가 값 결과로 전달될 때
  - 실 매개변수는 대응형식 매개변수를 초기화
  - 형식 매개변수는 지역변수로 사용
  - 부프로그램 종료시에 형식 매개변수의 값은 대응 실 매개변수로 전달
- 구현
  - 값 전달과 결과 전달의 결합으로 구현
- 문제점
  - 값 전달의 문제점 공유
  - 결과 전달의 문제점 공유



### 참조 전달

- 입출력 모드의 구현 - 주로 접근 경로를 전달, 공유 전달이라고도 불림
- 구현
  - 실 매개변수의 접근 경로를 스택에 전달
- 문제점
  - 별칭 생성
  - 형식 매개변수와 가시적 비지역 변수간의 충돌로 인함
- 장점
  - 전달 과정이 효율적
- 단점
  - 형식 매개변수 접근시 간접주소 사용
  - 데이터 이동이 한 방향만 요구될 경우에, 실 매개변수에 부주의한 영향을 미칠 가능성
  - 별칭 생성 가능



### 이름 전달

- 다중 모드의 구현 
  - 단일 매개변수 전달 구현 모델에 일치하지 안는 입출력 모드
  - 택스트 대채 방식으로 전달
    - 매개변수 전달시, 실 매개변수는 해당 모든 형식 매개변수를 문자 그대로 대치
    - 형식 매개변수는 부프로그램 호출시에 실 매개변수에 대한 접근 방법에 바인딩
    - 형식 매개변수에 값이나 주소에 대한 실제 바인딩은 형식 매개변수에 값이 배정되거나 참조될 때까지 연기
    - 형식 매개변수는 호출자 참조 환경에서 평가
    - 실 매개 변수 유형
      - 상수식: 값 전달
      - 스칼라 변수: 참조 전달
      - 배열 원소: 다른 매개변수 전달 방법과 다를 수 있음
      - 변수를 포함하는 표현식: 다른 매개변수 전달 방법과 다를 수 있음
- 장점
  - 지연 바인딩의 이점
    - 변수 사용에 있어서 융통성 부여
    - 실 매개변수 유형에 따른 다양한 매개변수 전달 방법 표현
  - 지연 평가의 이점
    - 매개변수가 사용되지 않으면 평가되지 않는다.
    - 단락회로 평가 고려
- 단점
  - 실행 관점에서 매우 비효율적
  - 구현하기 어렵다.
  - 프로그램을 판독하거나 이해하기에 어렵다.



## 주요 언어의 매개변수 전달 방법

|       언어       | 매개변수 전달 방법                         |
| :--------------: | ------------------------------------------ |
|        C         | 디폴트는 값전다르 포인터를 이용한 참조전달 |
|       C++        | C와 유사, 참조 타입을 이용한 참조 전달     |
|        C#        | 디폴트는 값전달, ref를 사용한 참조전달     |
|       Java       | 디폴트는 값전달, 객체 매개변수는 참조 전달 |
|       Ada        | 3가지 의미적 모델 제공: in, out, in out    |
| Pascal, Modula-2 | 값 전달이 기본, 참조 전달은 선택           |
|     Fortran      | 입출력 모드이 의미적 모드만 명세           |
|     Algol 60     | 이름 전달이 기본, 값 전달은 선택           |
|     Algol W      | 값 결과 전달                               |

