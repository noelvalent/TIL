# 부프로그램



## 부프로그램 개념

### 두 가지의 기본적인 추상화 도구

1. 프로세스 추상화

문장들의 집합을 부프로그램으로 추상화시키는 수단

1. 데이터 추상화

사용자가 새로운 데이터 타입을 정의하는 것을 허용하는 수단



부프로그램은 일련의 코드를 추상화하는 수단

예제

```
--CODE 1--
dist1 = x1 - y1
if (dist < 0) dist1 = -dist1
```

```
--CODE 2--
differ = pos1 - pos2
if (differ < 0) differ = -differ
```

- 거의 유사한 코드가 두 번 반복되어 작성되었음.
- 두 코드 부분은 변수 이름을 제외하면 동일함
- 두 개의 코드 부분에서 특정 변수를 제거하여 추상화 시킨다.

추상화 결과

```
d = a - b
if (d < 0) d = -d
```

이러한 추상화를 부 프로그램 추상화(subprogram abstraction)라고 한다/

> 동일하거나 유사한 일련의 코드를 반복하여 작성하지 않고 반복되는 일련의 코드를 부프로그램 추상화로 정의하고 위의 일련의 코드가 필요할 때마다 정의된 부프로그램을 불러서 사용한다.



대부분의 프로그래밍 언어는 부프로그램 추상화를 위한 언어 구조를 제공한다.

이런 구조로 Fortran에서는 Subroutine이며 Ada에서는 procedure이며, C에서는 함수이다.



### 부프로그램을 사용하는 장점

- 반복되는 코드를 단지 한번만 작성함으로써 코드 작성이 용이
- 프로그램 모듈화가 용이
  - 큰 문제는 더 작은 문제들로 쪼개어 해결하는 것이 일반적인 문제 해결 접근 방법
  - 이는 부프로그램 추상화를 통해서 이루어진다.
  - 한 개의 프로그램을 비교적 작은 부프로그램들의 집합으로 정의한다.
  - 각 부프로그램은 한 개의 독립적인 단위로 쉽게 작성되고, 수정되고, 테스트된다.
- 개별 컴파일(separate compilation)이 가능
  - 부프로그램은 대개 다른 부프로그램과 독립적이므로, 개별로 컴파일 되고, 나중에 링킹을 통해서 전체 프로그램으로 묶는 것이 가능하다.
  - 한 부프로그램이 수정되면, 해당 부프로그램만 다시 컴파일하면 된다.
  - 프로그램 일부의 수정으로 프로그램 전체를 다시 컴파일할 필요가 없다.
- 규모가 큰 프로그램의 경우 컴파일 시간을 상당히 절약할 수 있다.



## 부프로그램의 기본 정의

- 부프로그램 정의 (subprogram definition)
  - 부프로그램의 인터페이서와 동작을 서술
- 부프로그램 호출 (subprogram call)
  - 부프로그램이 수행에 대한 명시적 요청
- 부프로그램 머리부 (subprogram header)
  - 부프로그램의 첫 줄에 나타나며, 부프로그램의 인터페이스를 명세한다.
- 매개변수 프로파일 (parameter profile)
  - 형식 매개변수의 개수, 순서, 타입이다. 서명(Signature)이라 불리기도 함.
- 프로토콜 (protocol)
  - 매개변수 프로파일과 반환값 타입(함수인 경우)이며, 부프로그램에 대한 인터페이스를 명세
- 형식 매개변수 (formal parameter)
  - 부프로그램 머리부상에 나열된 매개변수
- 실 매개변수 (actual parameter)
  - 부프로그램 호출문에 사용되는 매개변수
- 부프로그램 선언 (subprogram declaration)
  - 부프로그램의 프로토콜만 제공하며, 몸체는 포함하지 않음.

```
int main(){
	int dis(int, int); //부프로그램 선언
	...
	dist1= dist(x1, x2); //부프로그램 호출
						//실 매개변수
}
```

```
/*
이 코드 전체 => 부프로그램 정의
a, b => 형식 매개변수
int dist(int a, int b) => 부프로그램 머리부
(int a, int b) => 매개변수 프로파일
부프로그램 머리부의 int들 => 프로토콜
*/
int dist(int a, int b){ 
	int d;
	d = a - b;
	if (d<0) d = -d;
	return d;
}
```

